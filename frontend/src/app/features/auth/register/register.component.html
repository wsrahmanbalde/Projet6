<div class="register-container">
    <button class="back-button" routerLink="/"><i class="fas fa-arrow-left"></i></button>

    <img src="logo_p6.png" alt="Logo mobile" class="mobile-logo" />

    <h2 class="title">Inscription</h2>
  
    <form class="register-form" (ngSubmit)="onSubmit()" [formGroup]="registerForm">
      <div class="form-group">
        <label for="username">Nom d'utilisateur</label>
        <input id="username" type="text" formControlName="username" />
        @if (registerForm.get('username')?.touched && registerForm.get('username')?.invalid) {
          <div class="error">
            Le nom d'utilisateur est obligatoire.
          </div>
        }
      </div>
      
  
      <div class="form-group">
        <label for="email">Adresse e-mail</label>
        <input id="email" type="email" formControlName="email" (blur)="emailTouched = true" />
        @if (registerForm.get('email')?.touched && registerForm.get('email')?.hasError('required')) {
          <div class="error">
            L'adresse e-mail est obligatoire.
          </div>
        }
        @if (emailInvalid) {
          <div class="error" >
            Veuillez entrer une adresse e-mail valide.
          </div>
        }
      </div>
      
  
      <div class="form-group">
        <label for="password">Mot de passe</label>
        <input id="password" type="password" formControlName="password" (input)="onPasswordInput()" />
        @if (registerForm.get('password')?.touched && registerForm.get('password')?.hasError('required')) {
          <div class="error">
            Le mot de passe est obligatoire.
          </div>
        }
        @if (showPasswordCriteria) {
          <ul class="password-checklist">
            <li [class.valid]="passwordCriteria.length">✔️ Au moins 8 caractères</li>
            <li [class.valid]="passwordCriteria.uppercase">✔️ Une majuscule</li>
            <li [class.valid]="passwordCriteria.lowercase">✔️ Une minuscule</li>
            <li [class.valid]="passwordCriteria.digit">✔️ Un chiffre</li>
            <li [class.valid]="passwordCriteria.specialChar">✔️ Un caractère spécial</li>
          </ul>
        }
      </div>
      
      <button type="submit" class="submit-btn">S'inscrire</button>

      @if (errorMessage) {
        <div class="error-message">
            L'email ou username déjà utilisé
          </div>
      }
    </form>
  </div>